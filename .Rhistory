library("raster")
f = 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10.grd'
All = raster(f)
cow = 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ca.grd'
plot(all)
Cattle = raster(cow)
plot(All)
plot(Cattle)
plot(All)
plot(All)
chicken = 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ch.grd'
Chicken  = raster(chicken)
plot(Chicken)
plot(Cattle)
plot(Chicken)
writeTIFF(All, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10.tiff')
library(tiff)
install.packages('tiff')
library(tiff)
writeTIFF(All, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10.tiff')
writeRaster(All, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10.tiff')
writeRaster(All, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10_n.tiff')
writeRaster(All, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10_n.tiff')
writeRaster(Cattle, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ca.grd_n.tiff')
writeRaster(Chicken, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ch_n.tiff')
writeRaster(Cattle, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ca_n.tiff')
f = 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10.gri'
cow = 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ca.gri'
chicken = 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ch.gri'
All = raster(f)
Cattle = raster(cow)
Chicken  = raster(chicken)
writeRaster(All, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10_n2.tiff')
writeRaster(Cattle, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ca_n2.tiff')
writeRaster(Chicken, 'C:/Users/danyk/Downloads/livestockantibiotics-20230308T103815Z-001/livestockantibiotics/mgTOTL10Ch_n2.tiff')
plot(Cattle)
plot(Chicken)
library(EGRET)
library(dataRetrieval)
library(stringr)
library(EGRET)
INPUT_folders = 'D:/Danyka/9 Phopshorus Use Efficiency/INPUTS_103122/2 Water Quality/eLists/'
OUTPUT_folders = 'D:/Danyka/9 Phopshorus Use Efficiency/OUTPUTS/ExportRatios/WRTDSresults/'
metadata_filename = 'METADATA_20230309.txt'
files = list.files(path = INPUT_folders, pattern=glob2rx('*Total Phosphorus*'))
# Recording the watershed metadata
Metadata <- data.frame(matrix(ncol = 10, nrow = 0))
colnames(Metadata) = c("Site","SiteName","StreamgageNumber","DrainageArea_km2","State","Latitude","Longitude","MinYear","MaxYear","FluxBias")
files = 'eList_Total Phosphorus_05495000.rds'
library(readr)
OUTPUT_folders = 'B:/LabFiles/users/DanykaByrnes/9 Phosphorus Use Efficiency/OUTPUTS/ExportRatios/'
WQ_folder = 'WRTDSresults/'
fileName = 'ErRatio_20230609.txt'
ZonalStatsYEAR = 2010
METDA = read_xlsx(paste0(OUTPUT_folders, 'Watershed_PropertyTable_20230309.xlsx'))
PS = read_csv(paste0(OUTPUT_folders,'PS_2010_ZonalStatistics.csv'))
library(readr)
OUTPUT_folders = 'B:/LabFiles/users/DanykaByrnes/9 Phosphorus Use Efficiency/OUTPUTS/ExportRatios/'
WQ_folder = 'WRTDSresults/'
fileName = 'ErRatio_20230609.txt'
ZonalStatsYEAR = 2010
METDA = read_xlsx(paste0(OUTPUT_folders, 'Watershed_PropertyTable_20230309.xlsx'))
??read_xlsx
?readr
install.packages('readr')
install.packages("readr")
library(readr)
OUTPUT_folders = 'B:/LabFiles/users/DanykaByrnes/9 Phosphorus Use Efficiency/OUTPUTS/ExportRatios/'
WQ_folder = 'WRTDSresults/'
fileName = 'ErRatio_20230609.txt'
ZonalStatsYEAR = 2010
METDA = read_xlsx(paste0(OUTPUT_folders, 'Watershed_PropertyTable_20230309.xlsx'))
METDA = read_csv(paste0(OUTPUT_folders, 'Watershed_PropertyTable_20230309.txt'))
PS = read_csv(paste0(OUTPUT_folders,'PS_2010_ZonalStatistics.csv'))
METDA$PS_2010 = NA
#METDA$HUM_2010 = NA
METDA$Load_2010 = NA
METDA$ExportRatio_2010 = NA
for (i in 1:dim(METDA)[1]) {
Site_i = METDA$Site[i]
AREA_i = METDA$DrainageArea_km2[i]*100
WatershedID_i = METDA$WatershedNumber[i]
# Isolating the P Surplus
idxPS = which(PS$BasinID == WatershedID_i)
PS_i = PS$PS2010_mean[idxPS]
#HUM_i = HUM$`_HUMmean`[idxPS]
# Isolating appropriate loads
WQ = read.csv(paste0(OUTPUT_folders,WQ_folder,Site_i,'.txt'))
idxYear = which(WQ$Year == ZonalStatsYEAR)
Load_i = WQ$Load[idxYear]/AREA_i # Not normalized.
if (identical(Load_i, numeric(0))) {
next }
ExportRatio = Load_i/PS_i
METDA$PS_2010[i] = PS_i
#METDA$HUM_2010[i] = HUM_i
METDA$Load_2010[i] = Load_i
METDA$ExportRatio_2010[i] = ExportRatio
}
View(METDA)
View(METDA)
METDA = read_csv(paste0(OUTPUT_folders, 'Watershed_PropertyTable_20230309.csv'))
PS = read_csv(paste0(OUTPUT_folders,'PS_2010_ZonalStatistics.csv'))
METDA$PS_2010 = NA
#METDA$HUM_2010 = NA
METDA$Load_2010 = NA
METDA$ExportRatio_2010 = NA
for (i in 1:dim(METDA)[1]) {
Site_i = METDA$Site[i]
AREA_i = METDA$DrainageArea_km2[i]*100
WatershedID_i = METDA$WatershedNumber[i]
# Isolating the P Surplus
idxPS = which(PS$BasinID == WatershedID_i)
PS_i = PS$PS2010_mean[idxPS]
#HUM_i = HUM$`_HUMmean`[idxPS]
# Isolating appropriate loads
WQ = read.csv(paste0(OUTPUT_folders,WQ_folder,Site_i,'.txt'))
idxYear = which(WQ$Year == ZonalStatsYEAR)
Load_i = WQ$Load[idxYear]/AREA_i # Not normalized.
if (identical(Load_i, numeric(0))) {
next }
ExportRatio = Load_i/PS_i
METDA$PS_2010[i] = PS_i
#METDA$HUM_2010[i] = HUM_i
METDA$Load_2010[i] = Load_i
METDA$ExportRatio_2010[i] = ExportRatio
}
fileName = 'ErRatio_20240110.txt'
write_csv(METDA, file = paste0(OUTPUT_folders,fileName))
View(PS)
